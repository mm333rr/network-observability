[global_tags]
  location = "capes-ventura"
  environment = "homelab"

[agent]
  interval = "30s"
  round_interval = true
  metric_batch_size = 1000
  metric_buffer_limit = 10000
  collection_jitter = "5s"
  flush_interval = "30s"
  flush_jitter = "5s"
  precision = ""
  hostname = "macpro"
  omit_hostname = false

# Output: expose as Prometheus metrics for Prometheus to scrape
[[outputs.prometheus_client]]
  listen = ":9273"
  metric_version = 2
  expiration_interval = "60s"

# Collect host CPU metrics
[[inputs.cpu]]
  percpu = true
  totalcpu = true
  collect_cpu_time = false
  report_active = false

# Collect host memory metrics
[[inputs.mem]]

# NOTE: disk, diskio, net, system collectors require Linux /proc
# and are not available in macOS Docker. Host metrics are covered
# by Node Exporter (port 9100) which runs with host PID namespace.

# ---------------------------------------------------------------------------
# SNMP — Network device polling
# Replace 192.168.1.1 with your actual router/switch IP(s)
# Default community string is "public" — change if you've configured otherwise
# ---------------------------------------------------------------------------
[[inputs.snmp]]
  agents = ["udp://192.168.1.1:161"]
  timeout = "5s"
  retries = 3
  version = 2
  community = "public"
  name = "router"

  # System uptime
  [[inputs.snmp.field]]
    name = "uptime"
    oid = "RFC1213-MIB::sysUpTime.0"

  # System name
  [[inputs.snmp.field]]
    name = "sysName"
    oid = "RFC1213-MIB::sysName.0"

  # Interface table — traffic in/out per interface
  [[inputs.snmp.table]]
    name = "interface"
    inherit_tags = ["sysName"]
    [[inputs.snmp.table.field]]
      name = "ifDescr"
      oid = "IF-MIB::ifDescr"
      is_tag = true
    [[inputs.snmp.table.field]]
      name = "ifInOctets"
      oid = "IF-MIB::ifInOctets"
    [[inputs.snmp.table.field]]
      name = "ifOutOctets"
      oid = "IF-MIB::ifOutOctets"
    [[inputs.snmp.table.field]]
      name = "ifInErrors"
      oid = "IF-MIB::ifInErrors"
    [[inputs.snmp.table.field]]
      name = "ifOutErrors"
      oid = "IF-MIB::ifOutErrors"
    [[inputs.snmp.table.field]]
      name = "ifOperStatus"
      oid = "IF-MIB::ifOperStatus"

# Add more SNMP agents for switches or APs:
# [[inputs.snmp]]
#   agents = ["udp://192.168.1.2:161"]
#   community = "public"
#   name = "switch"
#   ...
